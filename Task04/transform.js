

var rowData = [ { Id: '3a3fbc63-aafa-4dce-aabc-5bb4a3abcbd0',
JobKey: '0452018-03-06211410',
ExpectedArrivalTime: '2018-03-07 00:13:00',
ExpectedDepartureTime: '2018-03-07 00:29:00',
EstimatedArrivalTime: '',
ActualArrivalTime: '2018-03-06 22:42:11',
ActualDepartureTime: '2018-03-06 23:00:26',
ExpectedStopTime: '16',
JobStatus: 'Completed',
UnitId: '1072036965',
EstimatedDistance: '',
RouteId: '4628040c-c296-4447-abce-20659844895d',
RouteNo: '2114',
RouteStatus: 'Complete',
DriverId: '1240953100',
DriverName: 'Kosareff,William(10175926)',
Lat: '33.8337',
Lon: '-118.1541',
JobTypeId: '0fe5e1a2-959c-49d2-9ad0-27cf85b10070',
CustID: '045153478',
MarkerId: '1241690906',
STS_DriverID: '10175926',
STS_FirstScanTime: '2018-03-06T22:02:31',
STS_LastScanTime: '2018-03-06T22:50:40',
STS_StartUnloadTime: '2018-03-06T21:46:12',
STS_EndUnloadTime: '2018-03-06T22:57:03' },
{ Id: '2a246d4d-fac7-4774-be97-531103b36033',
JobKey: '0452018-03-06212412',
ExpectedArrivalTime: '2018-03-07 00:06:00',
ExpectedDepartureTime: '2018-03-07 00:13:00',
EstimatedArrivalTime: '',
ActualArrivalTime: '2018-03-06 22:26:03',
ActualDepartureTime: '2018-03-06 22:34:32',
ExpectedStopTime: '7',
JobStatus: 'Completed',
UnitId: '1072009681',
EstimatedDistance: '',
RouteId: '5a2c04fb-7aa5-4104-9ea9-d7f91d4591c6',
RouteNo: '2124',
RouteStatus: 'Complete',
DriverId: '1240953508',
DriverName: 'Benitez,Derek(50047320)',
Lat: '33.6856',
Lon: '-117.8563',
JobTypeId: '0fe5e1a2-959c-49d2-9ad0-27cf85b10070',
CustID: '045954719',
MarkerId: '1253699936',
STS_DriverID: '50047320',
STS_FirstScanTime: '2018-03-06T22:27:12',
STS_LastScanTime: '2018-03-06T22:28:15',
STS_StartUnloadTime: '2018-03-06T22:23:48',
STS_EndUnloadTime: '2018-03-06T22:31:53' },
{ Id: '6c5c8c9c-2f84-44be-8174-27b8071fb838',
JobKey: '0452018-03-06212413',
ExpectedArrivalTime: '2018-03-07 00:20:00',
ExpectedDepartureTime: '2018-03-07 00:25:00',
EstimatedArrivalTime: '',
ActualArrivalTime: '2018-03-06 22:40:03',
ActualDepartureTime: '2018-03-06 22:52:32',
ExpectedStopTime: '5',
JobStatus: 'Completed',
UnitId: '1072009681',
EstimatedDistance: '',
RouteId: '5a2c04fb-7aa5-4104-9ea9-d7f91d4591c6',
RouteNo: '2124',
RouteStatus: 'Complete',
DriverId: '1240953508',
DriverName: 'Benitez,Derek(50047320)',
Lat: '33.6667',
Lon: '-117.8671',
JobTypeId: '0fe5e1a2-959c-49d2-9ad0-27cf85b10070',
CustID: '045151167',
MarkerId: '1241558054',
STS_DriverID: '50047320',
STS_FirstScanTime: '2018-03-06T22:43:46',
STS_LastScanTime: '2018-03-06T22:43:50',
STS_StartUnloadTime: '2018-03-06T22:35:18',
STS_EndUnloadTime: '2018-03-06T22:45:11' },
{ Id: 'fb3ea712-9d72-4ec6-947f-545c1a84fd74',
JobKey: '0452018-03-07309201',
ExpectedArrivalTime: '2018-03-07 12:18:00',
ExpectedDepartureTime: '2018-03-07 12:43:00',
EstimatedArrivalTime: '',
ActualArrivalTime: '2018-03-07 13:17:41',
ActualDepartureTime: '2018-03-07 13:41:46',
ExpectedStopTime: '25',
JobStatus: 'Completed',
UnitId: '1072009781',
EstimatedDistance: '',
RouteId: 'a9c7f9f7-bf1f-4b02-972e-5051b8cd0e7e',
RouteNo: '3092',
RouteStatus: 'Complete',
DriverId: '1240952908',
DriverName: 'Hrey,Christopher(10109755)',
Lat: '34.060707781357',
Lon: '-118.230615003742',
JobTypeId: '0fe5e1a2-959c-49d2-9ad0-27cf85b10070',
CustID: '045525832',
MarkerId: '1113194101',
STS_DriverID: '',
STS_FirstScanTime: '',
STS_LastScanTime: '',
STS_StartUnloadTime: '',
STS_EndUnloadTime: '' },
{ Id: 'f0a07e47-e737-432b-bbd0-cfb402657fc3',
JobKey: '0452018-03-07309202',
ExpectedArrivalTime: '2018-03-07 13:20:00',
ExpectedDepartureTime: '2018-03-07 13:49:00',
EstimatedArrivalTime: '',
ActualArrivalTime: '2018-03-07 14:05:50',
ActualDepartureTime: '2018-03-07 14:29:55',
ExpectedStopTime: '29',
JobStatus: 'Completed',
UnitId: '1072009781',
EstimatedDistance: '',
RouteId: 'a9c7f9f7-bf1f-4b02-972e-5051b8cd0e7e',
RouteNo: '3092',
RouteStatus: 'Complete',
DriverId: '1240952908',
DriverName: 'Hrey,Christopher(10109755)',
Lat: '34.0592',
Lon: '-118.2307',
JobTypeId: '0fe5e1a2-959c-49d2-9ad0-27cf85b10070',
CustID: '045353243',
MarkerId: '1113194103',
STS_DriverID: '',
STS_FirstScanTime: '',
STS_LastScanTime: '',
STS_StartUnloadTime: '',
STS_EndUnloadTime: '' },
{ Id: 'fac8f4de-f57f-4d8e-a9d5-7919e598d9a1',
JobKey: '0452018-03-06205118',
ExpectedArrivalTime: '2018-03-07 00:03:00',
ExpectedDepartureTime: '2018-03-07 00:21:00',
EstimatedArrivalTime: '',
ActualArrivalTime: '2018-03-07 00:01:07',
ActualDepartureTime: '2018-03-07 00:26:10',
ExpectedStopTime: '18',
JobStatus: 'Completed',
UnitId: '1072010359',
EstimatedDistance: '',
RouteId: 'c31f82a3-7409-45b4-ab32-3c3bae682571',
RouteNo: '2051',
RouteStatus: 'Complete',
DriverId: '1240953134',
DriverName: 'Lopez,Jose(50018425)',
Lat: '34.0194996607005',
Lon: '-118.497700005633',
JobTypeId: '0fe5e1a2-959c-49d2-9ad0-27cf85b10070',
CustID: '045157974',
MarkerId: '1304134568',
STS_DriverID: '50018425',
STS_FirstScanTime: '2018-03-07T00:04:09',
STS_LastScanTime: '2018-03-07T00:09:14',
STS_StartUnloadTime: '2018-03-06T23:22:07',
STS_EndUnloadTime: '2018-03-07T00:09:23' },
{ Id: 'e6f41f85-ff28-4760-bb2a-04b68bed1cf7',
JobKey: '0452018-03-06209913',
ExpectedArrivalTime: '2018-03-07 00:10:00',
ExpectedDepartureTime: '2018-03-07 00:50:00',
EstimatedArrivalTime: '',
ActualArrivalTime: '2018-03-07 00:11:00',
ActualDepartureTime: '2018-03-07 00:36:05',
ExpectedStopTime: '40',
JobStatus: 'Completed',
UnitId: '1072009843',
EstimatedDistance: '',
RouteId: 'd8ec0187-445d-4963-94f0-9bf3418c1c35',
RouteNo: '2099',
RouteStatus: 'Complete',
DriverId: '1240953044',
DriverName: 'Alvarez,Enrique(10149987)',
Lat: '33.8173',
Lon: '-118.0083',
JobTypeId: '0fe5e1a2-959c-49d2-9ad0-27cf85b10070',
CustID: '045053694',
MarkerId: '1241691072',
STS_DriverID: '10149987',
STS_FirstScanTime: '2018-03-07T00:14:58',
STS_LastScanTime: '2018-03-07T00:49:17',
STS_StartUnloadTime: '2018-03-07T00:14:54',
STS_EndUnloadTime: '2018-03-07T01:00:43' },
{ Id: '6da3bab0-2b21-4927-b881-4e25c81104cb',
JobKey: '0452018-03-06209914',
ExpectedArrivalTime: '2018-03-07 01:11:00',
ExpectedDepartureTime: '2018-03-07 01:27:00',
EstimatedArrivalTime: '',
ActualArrivalTime: '2018-03-07 01:03:56',
ActualDepartureTime: '2018-03-07 01:44:56',
ExpectedStopTime: '16',
JobStatus: 'Completed',
UnitId: '1072009843',
EstimatedDistance: '',
RouteId: 'd8ec0187-445d-4963-94f0-9bf3418c1c35',
RouteNo: '2099',
RouteStatus: 'Complete',
DriverId: '1240953044',
DriverName: 'Alvarez,Enrique(10149987)',
Lat: '33.8172',
Lon: '-117.9945',
JobTypeId: '0fe5e1a2-959c-49d2-9ad0-27cf85b10070',
CustID: '045145201',
MarkerId: '1289020230',
STS_DriverID: '10149987',
STS_FirstScanTime: '2018-03-07T01:05:50',
STS_LastScanTime: '2018-03-07T01:07:55',
STS_StartUnloadTime: '2018-03-07T01:05:48',
STS_EndUnloadTime: '2018-03-07T01:22:30' },
{ Id: '12e5b6b2-0a15-4a82-80bc-f0b7ed705d2e',
JobKey: '0452018-03-06209710',
ExpectedArrivalTime: '2018-03-07 00:16:00',
ExpectedDepartureTime: '2018-03-07 00:22:00',
EstimatedArrivalTime: '',
ActualArrivalTime: '2018-03-06 23:51:36',
ActualDepartureTime: '2018-03-07 00:01:47',
ExpectedStopTime: '6',
JobStatus: 'Completed',
UnitId: '1072037393',
EstimatedDistance: '',
RouteId: 'f40a322b-787d-48a5-9c63-c570a0befdd3',
RouteNo: '2097',
RouteStatus: 'Complete',
DriverId: '1319367414',
DriverName: 'Avery,Robert(10127482)',
Lat: '34.0555',
Lon: '-118.2488',
JobTypeId: '0fe5e1a2-959c-49d2-9ad0-27cf85b10070',
CustID: '045052431',
MarkerId: '1242508988',
STS_DriverID: '10127482',
STS_FirstScanTime: '2018-03-06T23:37:03',
STS_LastScanTime: '2018-03-06T23:37:07',
STS_StartUnloadTime: '2018-03-06T23:37:00',
STS_EndUnloadTime: '2018-03-06T23:58:51' },
{ Id: '02b1abe0-48d0-4dc7-953b-ac16eebb3027',
JobKey: '0452018-03-06209711',
ExpectedArrivalTime: '2018-03-07 00:28:00',
ExpectedDepartureTime: '2018-03-07 00:54:00',
EstimatedArrivalTime: '',
ActualArrivalTime: '2018-03-07 00:01:47',
ActualDepartureTime: '2018-03-07 00:11:57',
ExpectedStopTime: '26',
JobStatus: 'Completed',
UnitId: '1072037393',
EstimatedDistance: '',
RouteId: 'f40a322b-787d-48a5-9c63-c570a0befdd3',
RouteNo: '2097',
RouteStatus: 'Complete',
DriverId: '1319367414',
DriverName: 'Avery,Robert(10127482)',
Lat: '34.0564',
Lon: '-118.2482',
JobTypeId: '0fe5e1a2-959c-49d2-9ad0-27cf85b10070',
CustID: '045052753',
MarkerId: '1241689438',
STS_DriverID: '10127482',
STS_FirstScanTime: '2018-03-06T23:59:40',
STS_LastScanTime: '2018-03-07T00:18:09',
STS_StartUnloadTime: '2018-03-06T23:58:58',
STS_EndUnloadTime: '2018-03-07T00:19:10' },
{ Id: '034efb32-6fd1-4a0e-8b7d-229f7a767092',
JobKey: '0452018-03-06209712',
ExpectedArrivalTime: '2018-03-07 00:54:00',
ExpectedDepartureTime: '2018-03-07 01:07:00',
EstimatedArrivalTime: '',
ActualArrivalTime: '2018-03-07 00:11:57',
ActualDepartureTime: '2018-03-07 00:22:08',
ExpectedStopTime: '13',
JobStatus: 'Completed',
UnitId: '1072037393',
EstimatedDistance: '',
RouteId: 'f40a322b-787d-48a5-9c63-c570a0befdd3',
RouteNo: '2097',
RouteStatus: 'Complete',
DriverId: '1319367414',
DriverName: 'Avery,Robert(10127482)',
Lat: '34.0564',
Lon: '-118.2482',
JobTypeId: '0fe5e1a2-959c-49d2-9ad0-27cf85b10070',
CustID: '045052639',
MarkerId: '1241689440',
STS_DriverID: '10127482',
STS_FirstScanTime: '2018-03-07T00:19:18',
STS_LastScanTime: '2018-03-07T00:24:50',
STS_StartUnloadTime: '2018-03-07T00:19:15',
STS_EndUnloadTime: '2018-03-07T00:29:17' },
{ Id: '1307ae24-3292-428b-bf79-b4cd07bfb640',
JobKey: '0452018-03-06209713',
ExpectedArrivalTime: '2018-03-07 01:44:00',
ExpectedDepartureTime: '2018-03-07 02:22:00',
EstimatedArrivalTime: '',
ActualArrivalTime: '2018-03-07 00:40:31',
ActualDepartureTime: '2018-03-07 01:24:39',
ExpectedStopTime: '38',
JobStatus: 'Completed',
UnitId: '1072037393',
EstimatedDistance: '',
RouteId: 'f40a322b-787d-48a5-9c63-c570a0befdd3',
RouteNo: '2097',
RouteStatus: 'Complete',
DriverId: '1319367414',
DriverName: 'Avery,Robert(10127482)',
Lat: '34.0530996950328',
Lon: '-118.25290013867',
JobTypeId: '0fe5e1a2-959c-49d2-9ad0-27cf85b10070',
CustID: '045052381',
MarkerId: '1241689442',
STS_DriverID: '10127482',
STS_FirstScanTime: '2018-03-07T00:46:37',
STS_LastScanTime: '2018-03-07T00:52:17',
STS_StartUnloadTime: '2018-03-07T00:46:34',
STS_EndUnloadTime: '2018-03-07T01:17:18' } ]

var TransformedData = [];

function TransformData(_data, _state){
    for(let index0 in _data){
        let rowItem = _data[index0];

        let formattedItem = TransformedData.find(i => (i.RouteId == rowItem.RouteId) && (i.RouteStatus == rowItem.RouteStatus));

        if(formattedItem){
            formattedItem.count++;
        }
        else{
            formattedItem = {}
            formattedItem["RouteId"] = rowItem.RouteId;
            formattedItem["RouteStatus"] = _state;
            formattedItem["Date"] = new Date();
            formattedItem["Count"] = 1;

            TransformedData.push(formattedItem);
        }
    }
}

TransformData(rowData, "Complete");

console.log(TransformedData);

